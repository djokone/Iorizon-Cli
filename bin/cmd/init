#! /usr/bin/env node 
var io = require('../lib/Io.js')
var inquirer = require('inquirer')
var writeJson = require('write-json'); 
var path = require('path')
var exist = require('fs').existsSync
var color = require('chalk')
// var textPrompt = require('text-prompt')
var switchPrompt = require('switch-prompt')

let init = new io()
let configFilePath = path.resolve(init.currentPath, 'io.json')
let confirmInit = false
let conf = {}
let initialize = function initialize (confirm) {
  if (confirm) {
    writeJson.sync(
        path.resolve(init.currentPath, 'io.json'),
        conf)
    console.info(color.black.bgGreen(' Successfull initialization ! '))
  }
}
console.log(init.currentPath)
if (exist(configFilePath)) {
  console.info(color.yellow('You all ready have a configuration file !'))
  inquirer.prompt({
    type: 'comfirm',
    message: 'Do you want to overwrite with a new one ?',
    default: 'y'
  }).when((rep) => {
    console.log(rep)
    // initialize(v)
  })
  // switchPrompt('Do you want to overwrite with a new one ?', 'yes', 'no', true)
  //   .on('submit', (v) => {
  //     initialize(v)
  //   })
    // .on('abort', (v) => console.log('Aborted with', v))
} else {
  initialize(true)
}

